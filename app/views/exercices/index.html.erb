<div class="container">
  <h1>Exercises</h1>
  <hr>
  <div class="form-custom">
    <%= form_with url: exercices_path, method: :get, class: "d-flex ", data:{turbo_frame: "exercices", controller: "form"} do %>
    <%= select_tag :query, options_from_collection_for_select(Tag.titles, "first", "last"),
      multiple: true,
      data: {controller: "tom-select",
        action: "form#submitForm",
        tom_select_options_value: {
        tags: true,
        plugins: {
          remove_button:{
          title:'Remove this item',
            <%exercice.tags.each do |tag|%>
              <div class= "tag rounded-pill text-bg-warning mx-2">
                <p><%= tag.title %></p>
              </div>
            <% end %>
            </span>
            <p>Instruction : <%= exercice.instructions.first(140)%> [...] </p>
            <p>XP : <strong><%= exercice.exp%></strong> </p>
          </div>
          <div class="m-4">
            <% if user_signed_in? %>
              <%= link_to toggle_favorite_exercice_path(exercice), data: {turbo_method: :post} do %>
                <%= turbo_frame_tag "like_#{dom_id(exercice)}" do %>
                  <%= render partial: 'exercices/partials/like_button', locals: { exercice: exercice } %>
                <% end %>
              <% end %>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
		      }
        }
       }
      },
      class: "form-control"
    %>
    <%# <%= submit_tag "Search", class: "btn btn-primary" %>
  <% end %>
  </div>

   <%= render "exercices/partials/exercices", exercices: @exercices%>

</div>
